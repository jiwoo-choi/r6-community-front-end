(this["webpackJsonpr6-search-community"]=this["webpackJsonpr6-search-community"]||[]).push([[6],{446:function(e,t,n){},447:function(e,t,n){},450:function(e,t,n){"use strict";n.r(t);var r=n(31),a=n(21),i=n(22),o=n(27),c=n(26),s=n(10),l=n(0),u=n.n(l),m=n(11),p=n(421),d=n(54),f=n(456),b=n(453),h=n(417),g=n(4),O=n.n(g),v=n(5),E=n.n(v),j=(n(7),n(25)),y=n(152),L=n(153),x=n(6);function I(e){var t=e.children,n=e.className,r=e.clearing,a=e.content,i=e.fitted,o=e.hidden,c=e.horizontal,s=e.inverted,l=e.section,m=e.vertical,p=E()("ui",Object(j.a)(r,"clearing"),Object(j.a)(i,"fitted"),Object(j.a)(o,"hidden"),Object(j.a)(c,"horizontal"),Object(j.a)(s,"inverted"),Object(j.a)(l,"section"),Object(j.a)(m,"vertical"),"divider",n),d=Object(y.a)(I,e),f=Object(L.a)(I,e);return u.a.createElement(f,O()({},d,{className:p}),x.a.isNil(t)?a:t)}I.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],I.propTypes={};var C=I,k=n(400),w=(n(446),n(447),n(420)),S=n.n(w),A=n(162),P=n(123),N=n(239),T=n(79),z=n(164),R={commentsList:[],commentIsLoading:!1,commentIsError:!1},B=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"mutate",value:function(e){var t=this;switch(e.type){case"CLICKREPLY":return Object(A.a)(Object(P.a)({type:"SETLOADING",loading:!0}),this.postComment(e.postId,e.content).pipe(Object(N.a)((function(n){return t.updateComment(e.postId).pipe(Object(T.a)((function(e){return{type:"UPLOADREPLY",commentsList:e}})))}))),Object(P.a)({type:"SETLOADING",loading:!1}));case"CLICKREPLYREPLY":return Object(A.a)(Object(P.a)({type:"SETLOADING",loading:!0}),this.postComment(e.postId,e.content,e.parentCommentId).pipe(Object(N.a)((function(n){return t.updateComment(e.postId).pipe(Object(T.a)((function(e){return{type:"UPLOADREPLY",commentsList:e}})))}))),Object(P.a)({type:"SETLOADING",loading:!1}))}}},{key:"reduce",value:function(e,t){var n=e;switch(t.type){case"UPLOADREPLY":return n.commentsList=t.commentsList,n;case"SETLOADING":return n.commentIsLoading=t.loading,n}}},{key:"updateComment",value:function(e){return z.a.shared.getJson("post/".concat(e)).pipe(Object(T.a)((function(e){return e.commentList})))}},{key:"postComment",value:function(e,t,n){return n?z.a.shared.post("comment",{content:t,postId:e,parentCommentId:n},"json",!0):z.a.shared.post("comment",{content:t,postId:e},"json",!0)}}]),n}(d.b),D=n(408),M=n(43),Y=n.n(M),G=n(24);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=n(150),q=n(71);function J(){var e=Object(s.a)(["\nresize: none;\nmargin-bottom: 1rem;\nwidth: 100%;\nmin-height: 6.125rem;\nfont-size: 1rem;\ncolor: rgb(33, 37, 41);\nline-height: 1.75;\npadding: 1rem 1rem 1.5rem;\noutline: none;\nborder-width: 1px;\nborder-style: solid;\nborder-color: rgb(233, 236, 239);\nborder-image: initial;\nborder-radius: 4px;\n"]);return J=function(){return e},e}var V=m.a.textarea(J());function F(e){var t=e.placeholder,n=e.textRef,r=Object(l.useRef)(null);return Object(l.useEffect)((function(){n&&("function"===typeof n?n(r):n=r)}),[]),u.a.createElement(V,{ref:r,placeholder:t})}function H(){var e=Object(s.a)(["\n    background-color: rgba(0, 0, 0, 0.016);\n    margin-top: 1.3125rem;\n    border-width: 1px;\n    border-style: solid;\n    border-color: rgba(0, 0, 0, 0.02);\n    border-image: initial;\n    padding: 1rem;\n    border-radius: 4px;\n"]);return H=function(){return e},e}function W(){var e=Object(s.a)(["\n    display:flex;\n    justify-content:flex-end;\n    // margin-bottom: 1rem;\n"]);return W=function(){return e},e}function $(){var e=Object(s.a)(["\n    display:flex;\n    flex-basis:40px;\n    max-height:40px;\n    align-items:center;\n"]);return $=function(){return e},e}function Q(){var e=Object(s.a)(["\n"]);return Q=function(){return e},e}function X(){var e=Object(s.a)(["\n    display:flex;\n    flex-grow:1;\n    padding-top:10px;\n    padding-bottom:10px;\n    max-height:120px;\n    align-items:center;\n"]);return X=function(){return e},e}function Z(){var e=Object(s.a)(["\n    display:flex;\n    align-items:center;\n    flex-basis:40px;\n    max-height:40px;\n\n\n    #profile {\n        font-weight:bold;\n        margin-right:10px;\n        margin-left:-5px;\n    }\n\n    #id {\n        font-weight: bold;\n        margin-right:10px;\n        font-size:1.2rem;\n    }\n\n    #time {\n        color : #A9A9A9;\n    }\n"]);return Z=function(){return e},e}function ee(){var e=Object(s.a)(["\n    position:relative;\n    display: flex;\n    flex-direction: column;\n    justify-content:flex-end;\n    // border-top: 1px solid #eee;\n    border-bottom: 1px solid #eee;\n    padding: 0px 10px;\n"]);return ee=function(){return e},e}var te=m.a.div(ee()),ne=m.a.div(Z()),re=m.a.div(X()),ae=m.a.div(Q()),ie=m.a.div($()),oe=m.a.div(W()),ce=m.a.div(H());function se(e){var t=e.isChild,n=(e.id,e.comment),r=e.onSubmit,a=U(Object(l.useState)(!1),2),i=a[0],o=a[1];return u.a.createElement(te,null,u.a.createElement(ne,null,t&&u.a.createElement(q.a,{name:"level up alternate",flipped:"vertically",rotated:"clockwise"}),u.a.createElement(_.b,{style:{marginLeft:"-5px"},rank:"SILVER_I",size:30}),u.a.createElement("div",{id:"id"},n.username)),u.a.createElement(re,null,n.content),!t&&u.a.createElement(ie,null,u.a.createElement(k.a,{icon:!0,color:"black",size:"mini",compact:!0,onClick:function(){o(!i)}},u.a.createElement(q.a,{name:"reply"}),"\xa0 \ub2f5\uae00\ub2ec\uae30")),i&&u.a.createElement(ce,null,u.a.createElement(F,{placeholder:"".concat(n.username," \uc5d0\uac8c \ub367\uae00 \ub2ec\uae30..")}),u.a.createElement(oe,null,u.a.createElement(k.a,{color:"green",size:"small",compact:!0,onClick:r},"\uc791\uc131\ud558\uae30"),u.a.createElement(k.a,{color:"grey",size:"small",compact:!0,onClick:function(){return o(!1)}},"\ucde8\uc18c"))),u.a.createElement(ae,null,n.childComment.map((function(e,t){return u.a.createElement(se,{isChild:!0,comment:e,key:n.commentId+t+"_CHILD_COMMENT"})}))))}function le(){var e=Object(s.a)(["\n    display:flex;\n    justify-content: flex-end;\n"]);return le=function(){return e},e}function ue(){var e=Object(s.a)(["\n    font-size:1rem;\n    color:#A9A9A9;\n"]);return ue=function(){return e},e}function me(){var e=Object(s.a)(["\n    font-weight:bold;\n    margin-right:0.8em;\n\n"]);return me=function(){return e},e}function pe(){var e=Object(s.a)(["\n    display:flex;\n    flex-direction:row;\n    font-size:1.1rem;\n"]);return pe=function(){return e},e}function de(){var e=Object(s.a)(["\n    min-height:400px;\n    overflow-y:hidden;\n    word-break:break-all;\n"]);return de=function(){return e},e}function fe(){var e=Object(s.a)(["\n    position: relative;\n    background: #fff;\n    box-shadow: 0 1px 2px 0 rgba(34,36,38,.15);\n    margin: 1rem 0;\n    padding: 2em 2em;\n    border-radius: .28571429rem;\n    border: 1px solid rgba(34,36,38,.15);\n"]);return fe=function(){return e},e}se.defaultProps={isChild:!1};var be=m.a.div(fe()),he=m.a.div(de()),ge=m.a.div(pe()),Oe=m.a.div(me()),ve=m.a.div(ue()),Ee=m.a.div(le()),je=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).disposeBag=new d.a,i.reactor=void 0,i.commentInput=u.a.createRef(),i.reactor=new B(R),i.state=Object(r.a)(Object(r.a)({},i.props.reactor.getState()),R),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.disposeBag.disposeOf=this.props.reactor.state.pipe(Object(T.a)((function(e){return e.postId})),Object(D.a)()).subscribe((function(t){return e.props.reactor.dispatch({type:"CLICKPOST",postId:t})})),this.disposeBag.disposeOf=this.props.reactor.state.pipe(Object(T.a)((function(e){return e.isLoading})),Object(D.a)()).subscribe((function(t){e.setState({isLoading:t})})),this.disposeBag.disposeOf=this.props.reactor.state.pipe(Object(T.a)((function(e){return{post:e.post}})),Object(D.a)((function(e,t){return Y.a.isEqual(e.post,t.post)}))).subscribe((function(t){return e.setState({post:t.post})})),this.disposeBag.disposeOf=this.props.reactor.state.pipe(Object(T.a)((function(e){return{post:e.post}})),Object(D.a)((function(e,t){return Y.a.isEqual(e.post,t.post)}))).subscribe((function(t){return e.setState({post:t.post})})),this.disposeBag.disposeOf=this.reactor.state.pipe(Object(T.a)((function(e){return e.commentIsLoading})),Object(D.a)(Y.a.isEqual)).subscribe((function(t){return e.setState({commentIsLoading:t})})),this.disposeBag.disposeOf=this.reactor.state.pipe(Object(T.a)((function(e){return e.commentIsError})),Object(D.a)(Y.a.isEqual)).subscribe((function(t){return e.setState({commentIsError:t})})),this.disposeBag.disposeOf=this.reactor.state.pipe(Object(T.a)((function(e){return e.commentsList})),Object(D.a)(Y.a.isEqual)).subscribe((function(t){return e.setState({commentsList:t})}))}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.disposeBag)||void 0===e||e.unsubscribe(),this.disposeBag=null}},{key:"commentList",value:function(e){return console.log(e.map((function(e,t){return u.a.createElement(se,{key:t+"_COMMENT",comment:e})}))),e.map((function(e,t){return u.a.createElement(se,{key:t+"_COMMENT",comment:e})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,r=t.post,a=this.state.commentsList;if(n||!r)return u.a.createElement(f.a,{loading:!0},u.a.createElement(b.a,null,u.a.createElement(b.a.Header,null,u.a.createElement(b.a.Line,null),u.a.createElement(b.a.Line,null)),u.a.createElement(b.a.Paragraph,null,u.a.createElement(b.a.Line,null),u.a.createElement(b.a.Line,null),u.a.createElement(b.a.Line,null),u.a.createElement(b.a.Line,null))));var i=r,o=i.author,c=i.title,s=i.content,l=i.commentList,m=i.createdTime,d=i.postId;this.state.commentIsLoading;return console.log("comments test",this.state),u.a.createElement(u.a.Fragment,null,u.a.createElement(be,{key:d+"_KEY"},u.a.createElement(h.a,{size:"huge"},c),u.a.createElement(ge,null,u.a.createElement(Oe,null,o),u.a.createElement(ve,null,u.a.createElement(S.a,{fromNow:!0},m))),u.a.createElement(C,null),u.a.createElement(he,null,u.a.createElement(p.Viewer,{initialValue:s})),u.a.createElement(h.a,{as:"h2",dividing:!0},"\ub367\uae00 ",l.length," \uac1c"),u.a.createElement(F,{placeholder:"\ub367\uae00\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",textRef:function(t){return e.commentInput=t}}),u.a.createElement(Ee,null,u.a.createElement(k.a,{content:"\ub367\uae00 \ub2ec\uae30",labelPosition:"left",icon:"edit",color:"green",disabled:this.state.commentIsLoading,loading:this.state.commentIsLoading,onClick:function(){var t;e.props.reactor.getState().isLogined?null===(t=e.reactor)||void 0===t||t.dispatch({type:"CLICKREPLY",postId:d,content:e.commentInput.current.value}):e.props.reactor.dispatch({type:"CLICKLOGINBUTTON"})}})),u.a.createElement(u.a.Fragment,null,0!==a.length?this.commentList(a):this.commentList(l))))}}]),n}(u.a.PureComponent);t.default=Object(G.f)(je)}}]);
//# sourceMappingURL=6.49a13590.chunk.js.map